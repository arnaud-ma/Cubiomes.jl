using Colors
using Plots

const BIOME_COLORS = Dict(
    ocean => colorant"0x000070",
    plains => colorant"0x8db360",
    desert => colorant"0xfa9418",
    windswept_hills => colorant"0x606060",
    forest => colorant"0x056621",
    taiga => colorant"0x0b6a5f",
    swamp => colorant"0x07f9b2",
    river => colorant"0x0000ff",
    nether_wastes => colorant"0x572526",
    the_end => colorant"0x8080ff",
    frozen_ocean => colorant"0x7070d6",
    frozen_river => colorant"0xa0a0ff",
    snowy_plains => colorant"0xffffff",
    snowy_mountains => colorant"0xa0a0a0",
    mushroom_fields => colorant"0xff00ff",
    mushroom_field_shore => colorant"0xa000ff",
    beach => colorant"0xfade55",
    desert_hills => colorant"0xd25f12",
    wooded_hills => colorant"0x22551c",
    taiga_hills => colorant"0x163933",
    mountain_edge => colorant"0x72789a",
    jungle => colorant"0x507b0a",
    jungle_hills => colorant"0x2c4205",
    sparse_jungle => colorant"0x60930f",
    deep_ocean => colorant"0x000030",
    stony_shore => colorant"0xa2a284",
    snowy_beach => colorant"0xfaf0c0",
    birch_forest => colorant"0x307444",
    birch_forest_hills => colorant"0x1f5f32",
    dark_forest => colorant"0x40511a",
    snowy_taiga => colorant"0x31554a",
    snowy_taiga_hills => colorant"0x243f36",
    old_growth_pine_taiga => colorant"0x596651",
    giant_tree_taiga_hills => colorant"0x454f3e",
    windswept_forest => colorant"0x5b7352",
    savanna => colorant"0xbdb25f",
    savanna_plateau => colorant"0xa79d64",
    badlands => colorant"0xd94515",
    wooded_badlands => colorant"0xb09765",
    badlands_plateau => colorant"0xca8c65",
    small_end_islands => colorant"0x4b4bab",
    end_midlands => colorant"0xc9c959",
    end_highlands => colorant"0xb5b536",
    end_barrens => colorant"0x7070cc",
    warm_ocean => colorant"0x0000ac",
    lukewarm_ocean => colorant"0x000090",
    cold_ocean => colorant"0x202070",
    deep_warm_ocean => colorant"0x000050",
    deep_lukewarm_ocean => colorant"0x000040",
    deep_cold_ocean => colorant"0x202038",
    deep_frozen_ocean => colorant"0x404090",
    seasonal_forest => colorant"0x2f560f",
    rainforest => colorant"0x47840e",
    shrubland => colorant"0x789e31",
    the_void => colorant"0x000000",
    sunflower_plains => colorant"0xb5db88",
    desert_lakes => colorant"0xffbc40",
    windswept_gravelly_hills => colorant"0x888888",
    flower_forest => colorant"0x2d8e49",
    taiga_mountains => colorant"0x339287",
    swamp_hills => colorant"0x2fffda",
    ice_spikes => colorant"0xb4dcdc",
    modified_jungle => colorant"0x78a332",
    modified_jungle_edge => colorant"0x88bb37",
    old_growth_birch_forest => colorant"0x589c6c",
    tall_birch_hills => colorant"0x47875a",
    dark_forest_hills => colorant"0x687942",
    snowy_taiga_mountains => colorant"0x597d72",
    old_growth_spruce_taiga => colorant"0x818e79",
    giant_spruce_taiga_hills => colorant"0x6d7766",
    modified_gravelly_mountains => colorant"0x839b7a",
    windswept_savanna => colorant"0xe5da87",
    shattered_savanna_plateau => colorant"0xcfc58c",
    eroded_badlands => colorant"0xff6d3d",
    modified_wooded_badlands_plateau => colorant"0xd8bf8d",
    modified_badlands_plateau => colorant"0xf2b48d",
    bamboo_jungle => colorant"0x849500",
    bamboo_jungle_hills => colorant"0x5c6c04",
    soul_sand_valley => colorant"0x4d3a2e",
    crimson_forest => colorant"0x981a11",
    warped_forest => colorant"0x49907b",
    basalt_deltas => colorant"0x645f63",
    dripstone_caves => colorant"0x4e3012",
    lush_caves => colorant"0x283c00",
    meadow => colorant"0x60a445",
    grove => colorant"0x47726c",
    snowy_slopes => colorant"0xc4c4c4",
    jagged_peaks => colorant"0xdcdcc8",
    frozen_peaks => colorant"0xb0b3ce",
    stony_peaks => colorant"0x7b8f74",
    deep_dark => colorant"0x031f29",
    mangrove_swamp => colorant"0x2ccc8e",
    cherry_grove => colorant"0xff91c8",
)

to_color(x::BiomeID) = BIOME_COLORS[x]

function Plots.plot(map::MCMap{2})#, widen_factor=0.05)
    colors = to_color.(map)
    xlims = first(axes(map, 1)), last(axes(map, 1))
    ylims = first(axes(map, 2)), last(axes(map, 2))

    # xlims = @. xlims + widen_factor * abs(xlims) * [sign(xlims)...]
    # ylims = @. ylims + widen_factor * abs(ylims) * [sign(ylims)...]

    return plot(colors; xlims=xlims, ylims=ylims, grid=:true)
end
